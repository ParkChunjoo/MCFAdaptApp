<Window x:Class="MCFAdaptApp.WPF.Views.LoginView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:MCFAdaptApp.WPF.ViewModels"
        xmlns:converters="clr-namespace:MCFAdaptApp.WPF.Converters"
        Title="Real Time Adaptive"
        WindowStartupLocation="CenterScreen"
        Width="800"
        Height="600"
        Background="#FF1E1E1E"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        BorderThickness="0">

    <Window.Resources>
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        
        <!-- Input style -->
        <Style x:Key="InputStyle" TargetType="Control">
            <Setter Property="Margin" Value="0,5,0,10" />
            <Setter Property="Padding" Value="8,5" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Height" Value="35" />
        </Style>
        
        <!-- Label style -->
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="Margin" Value="0,5,0,2" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="FontSize" Value="14" />
        </Style>
        
        <!-- Button style -->
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Margin" Value="0,10,0,0" />
            <Setter Property="Padding" Value="15,8" />
            <Setter Property="Background" Value="#FF3F3F46" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="MinWidth" Value="100" />
            <Setter Property="Height" Value="35" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#FF007ACC" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Border CornerRadius="8" Background="#FF1E1E1E" Margin="10">
        <Border.Effect>
            <DropShadowEffect BlurRadius="15" Direction="-90" 
                            RenderingBias="Quality" ShadowDepth="2"/>
        </Border.Effect>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header with Logo -->
            <StackPanel Grid.Row="0" Margin="0,40,0,20" HorizontalAlignment="Center">
                <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                    <Image Source="/Resources/Images/OncosofLogo.png" 
                           Width="200" 
                           Height="80" 
                           Margin="0,0,0,10"/>
                    <TextBlock Text="Real Time Adaptive"
                               Foreground="White"
                               FontSize="24"
                               FontWeight="Bold"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,10"/>
                </StackPanel>
                <TextBlock Text="Username:"
                           Foreground="White"
                           FontSize="16"
                           FontWeight="SemiBold"
                           Margin="0,20,0,5"/>
                <TextBox Text="{Binding UserId, UpdateSourceTrigger=PropertyChanged}"
                         Height="45"
                         Background="#FF2D2D30"
                         BorderThickness="0"
                         Foreground="White"
                         Padding="10,8"
                         FontSize="16"
                         Width="450"
                         Margin="0,0,0,20"/>

                <!-- Password -->
                <TextBlock Text="Password:"
                           Foreground="White"
                           FontSize="16"
                           FontWeight="SemiBold"
                           Margin="0,0,0,5"/>
                <Grid Margin="0,0,0,30" Width="450">
                    <PasswordBox x:Name="PasswordBox"
                                 Height="45"
                                 Background="#FF2D2D30"
                                 BorderThickness="0"
                                 Foreground="White"
                                 Padding="10,8"
                                 FontSize="16"
                                 Margin="0"/>
                    <TextBox x:Name="PasswordVisibleBox"
                             Height="45"
                             Background="#FF2D2D30"
                             BorderThickness="0"
                             Foreground="White"
                             Padding="10,8"
                             FontSize="16"
                             Margin="0"
                             Visibility="Collapsed"
                             Text="{Binding Password, UpdateSourceTrigger=PropertyChanged}"/>
                    <Button x:Name="TogglePasswordButton"
                            Width="35"
                            Height="35"
                            Background="Transparent"
                            BorderThickness="0"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Margin="0,0,5,0"
                            Panel.ZIndex="1"
                            Click="TogglePasswordButton_Click">
                        <Path x:Name="EyeIcon"
                              Data="M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"
                              Fill="White"
                              Stretch="Uniform"
                              Width="20"
                              Height="20"/>
                    </Button>
                </Grid>

                <!-- Error message -->
                <TextBlock Text="{Binding ErrorMessage}"
                           Foreground="#FFFF6347"
                           TextWrapping="Wrap"
                           Margin="0,0,0,10"
                           Width="450"
                           Visibility="{Binding HasError, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                <!-- Sign in button -->
                <Button Content="Sign in"
                        Command="{Binding LoginCommand}"
                        Height="45"
                        Background="#2196F3"
                        Foreground="White"
                        BorderThickness="0"
                        FontSize="18"
                        FontWeight="Bold"
                        Margin="0,0,0,10"
                        Width="450"
                        HorizontalAlignment="Center"/>

                <!-- Exit button -->
                <Button Content="Exit application"
                        Command="{Binding ExitCommand}"
                        Height="45"
                        Background="Transparent"
                        Foreground="#2196F3"
                        BorderThickness="1"
                        BorderBrush="#2196F3"
                        FontSize="18"
                        FontWeight="Bold"
                        Width="450"
                        HorizontalAlignment="Center"/>
            </StackPanel>

            <!-- Loading overlay -->
            <Grid Grid.RowSpan="3"
                  Background="#80000000"
                  Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
                <StackPanel HorizontalAlignment="Center"
                            VerticalAlignment="Center">
                    <TextBlock Text="Signing in..."
                               Foreground="White"
                               FontSize="16"
                               Margin="0,0,0,10"
                               HorizontalAlignment="Center"/>
                    <ProgressBar IsIndeterminate="True"
                                 Width="150"
                                 Height="2"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Border>
</Window>
